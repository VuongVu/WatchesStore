<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/basePage.xhtml">
                
    <ui:define name="title">
       <title>Checkout</title>
    </ui:define>
    
    <ui:define name="body-content">
        <!-- MAIN-CONTENT-SECTION START -->
        <section class="main-content-section">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- BSTORE-BREADCRUMB START -->
                        <div class="bstore-breadcrumb">
                            <a href="index.xhtml">HOME</a>
                            <span><i class="fa fa-caret-right"></i></span>
                            <span>Checkout</span>
                        </div>
                        <!-- BSTORE-BREADCRUMB END -->
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <h2 class="page-title">Choose your payment method <span class="shop-pro-item">Your shopping cart contains: #{cartBean.number} products </span></h2>
                    </div>  
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- SHOPING-CART-MENU START -->
                        <div class="shoping-cart-menu">
                            <ul class="step">
                                <li class="step-todo first step-done">
                                    <span><a href="cart.xhtml">01. Summary</a></span>
                                </li>
                                <li class="step-todo second step-done">
                                    <span><a href="checkout-signin.xhtml">02. Sign in</a></span>
                                </li>
                                <li class="step-todo third step-done">
                                    <span><a href="checkout-address.xhtml">03. Address</a></span>
                                </li>
                                <li class="step-todo four step-done">
                                    <span><a href="checkout-shipping.xhtml">04. Shipping</a></span>
                                </li>
                                <li class="step-current last" id="step_end">
                                    <span>05. Payment</span>
                                </li>
                            </ul>                                   
                        </div>
                    </div>
                
                <h:form prependId="false" rendered="#{loginBean.loggedIn==true and customerBean.findCustomerByEmail(loginBean.email).address!=null}">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- SHOPING-CART-MENU START -->
                        <!-- SHOPING-CART-MENU END -->
                        <!-- CART TABLE_BLOCK START -->
                        <div class="table-responsive">
                            <h:dataTable var="cart" value="#{cartBean.cart.items}" styleClass="table table-bordered" id="cart-summary">
                                <h:column a:class="cart-product">
                                    <f:facet name="header">Product</f:facet>
                                    <h:graphicImage value="/DisplayImage?productId=#{cart.product.productId}"
                                                    alt="product image"
                                                    style="width:100px;height:100px" >
                                    </h:graphicImage>
                                </h:column>
                                
                                <h:column a:class="cart-description text-center"> 
                                    <f:facet name="header">Name</f:facet>
                                        #{cart.product.productName}
                                </h:column>
                                    
                                <h:column a:class="cart-unit text-center">
                                    <f:facet name="header">Unit Price</f:facet>
                                    $#{cart.product.productPrice-(cart.product.productPrice*(cart.product.productDiscount/100))}
                                	<br/>
                                	<h:outputText styleClass="old-price" value="$#{cart.product.productPrice}" rendered="#{cart.product.productDiscount!=0}"></h:outputText>
                                </h:column>
                                
                                 <h:column a:class="cart_quantity text-center">
                                	<f:facet name="header">Qty</f:facet>
                                    <div>
                                        <span>#{cart.quantity}</span>
                                    </div>
                                </h:column>
                                
                                <h:column a:class="cart-total text-center">
                                    <f:facet name="header">Total</f:facet>
                                    $#{cart.product.productPrice*cart.quantity-(cart.product.productPrice*cart.quantity*(cart.product.productDiscount/100))}
                                </h:column>
                            </h:dataTable>  
                            <div style="float:right;">  
                        	<span style="font-weight: bold; color: blue;">Total amount: </span><h:outputText value="$#{cartBean.total_amount}" style="font-weight: bold; color: blue; font-size:20px"/>
                        	</div><br/><br/>
                        </div>
                        <!-- CART TABLE_BLOCK END -->
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- FOUR-PAYMENT-METHOD START -->
                        <div class="four-payment-method">
                            <!-- SINGLE-PAYMENT-METHOD START -->
                            <div class="single-payment-method payment-method-one">
                                <a href="#">Pay by bank wire<span> (order processing will be longer)</span><i class="fa fa-chevron-right"></i></a>
                            </div>
                            <!-- SINGLE-PAYMENT-METHOD END -->
                            <!-- SINGLE-PAYMENT-METHOD START -->
                            <div class="single-payment-method payment-method-two">
                                <a href="#">Pay by check<span> (order processing will be longer)</span><i class="fa fa-chevron-right"></i></a>
                            </div>
                            <!-- SINGLE-PAYMENT-METHOD END -->
                            <!-- SINGLE-PAYMENT-METHOD START -->                            
                            <div class="single-payment-method payment-method-three">
                                <a href="#">Pay by paypal<span> (order processing will be longer)</span><i class="fa fa-chevron-right"></i></a>
                            </div>
                            <!-- SINGLE-PAYMENT-METHOD END -->
                            <!-- SINGLE-PAYMENT-METHOD START -->                            
                            <div class="single-payment-method payment-method-four">
                                <a href="#">Pay by master card<span> (order processing will be longer)</span><i class="fa fa-chevron-right"></i></a>
                            </div>  
                            <!-- SINGLE-PAYMENT-METHOD END -->                          
                        </div>
                        <!-- FOUR-PAYMENT-METHOD END -->
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- RETURNE-CONTINUE-SHOP START -->
                        <div class="returne-continue-shop">
                            <a href="index.xhtml" class="continueshoping"><i class="fa fa-chevron-left"></i>Continue shopping</a>
                        </div>  
                        <!-- RETURNE-CONTINUE-SHOP END -->                              
                    </div>
                    </h:form>
                </div>
            </div>
        </section>
        <!-- MAIN-CONTENT-SECTION END -->
    </ui:define>
    
</ui:composition>