<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/basePage.xhtml">
                
    <ui:define name="title">
       <title>Cart</title>
    </ui:define>
    
    <ui:define name="body-content">
    <h:form prependId="false">
        <!-- MAIN-CONTENT-SECTION START -->
        <section class="main-content-section">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- BSTORE-BREADCRUMB START -->
                        <div class="bstore-breadcrumb">
                            <a href="index.xhtml">HOMe</a>
                            <span><i class="fa fa-caret-right"></i></span>
                            <span>Your shopping cart</span>
                        </div>
                        <!-- BSTORE-BREADCRUMB END -->
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- SHOPPING-CART SUMMARY START -->
                        <!-- <h2 class="page-title">Shopping-cart summary <span class="shop-pro-item">Your shopping cart contains: 2 products</span></h2> -->
                        <!-- SHOPPING-CART SUMMARY END -->
                    </div>  
                    
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- SHOPING-CART-MENU START -->
                        <div class="shoping-cart-menu">
                            <ul class="step">
                                <li class="step-current first">
                                    <span>01. Summary</span>
                                </li>
                                <li class="step-todo second">
                                    <span>02. Sign in</span>
                                </li>
                                <li class="step-todo third">
                                    <span>03. Address</span>
                                </li>
                                <li class="step-todo four">
                                    <span>04. Shipping</span>
                                </li>
                                <li class="step-todo last" id="step_end">
                                    <span>05. Payment</span>
                                </li>
                            </ul>                                   
                        </div>
                        <!-- SHOPING-CART-MENU END -->
                        <!-- CART TABLE_BLOCK START -->
                        <div class="table-responsive">
                        <h:dataTable var="cart" value="#{cartBean.cart.items}" styleClass="table table-bordered" id="cart-summary">
                            <p:column a:class="cart-product">
                            <f:facet name="header">Product</f:facet>
                                 <h:graphicImage value="/DisplayImage?productId=#{cart.product.productId}"
                                                    alt="product image"
                                                    style="width:100px;height:100px" >
                                    </h:graphicImage>
                            </p:column>
                            
                            <p:column styleClass="cart-description"> 
                            <f:facet name="header">Description</f:facet>
                                #{cart.product.productName}
                            </p:column>
                            
                            <p:column styleClass="cart-avail text-center">
                            <f:facet name="header">Availability</f:facet>
                                <span class="label label-success">In stock</span>
                            </p:column>
                            
                            <p:column styleClass="cart-unit text-right">
                            <f:facet name="header">Unit Price</f:facet>
                            	$#{cart.product.productPrice-(cart.product.productPrice*(cart.product.productDiscount/100))}
                                <br/>
                                <h:outputText styleClass="old-price" value="$#{cart.product.productPrice}" rendered="#{cart.product.productDiscount!=0}"></h:outputText>
                            </p:column>
                            
                             <p:column a:class="cart_quantity">
                            	<f:facet name="header" style="width:100px;">Quantity</f:facet>
                                <div>
                                    <h:inputText styleClass="cart-plus-minus" value="#{cart.quantity}" readonly="true"></h:inputText>
                                    <h:commandLink action="#{cartBean.minusFromCart(cart.product)}" value="-" styleClass="dec qtybutton">
                                    	<f:ajax execute="@form" render="@form"></f:ajax>
                                    </h:commandLink>
                                    <h:commandLink action="#{cartBean.addToCart(cart.product,1)}" value="+" styleClass="inc qtybutton">
                                    	<f:ajax execute="@form" render="@form"></f:ajax>
                                    </h:commandLink>
                                </div>
                            </p:column>
                            
                            <p:column a:class="cart-delete">
                            <f:facet name="header">Delete</f:facet>
                               <span>
                                  <!-- <a href="#" class="cart_quantity_delete" title="Delete"><i class="fa fa-trash-o"></i></a> -->
                                  <h:commandLink action="#{cartBean.deleteFromCart(cart.product)}" styleClass="cart_quantity_delete"><i class="fa fa-trash-o"></i>
                                  	<f:ajax execute="@form" render="@form cartForm"></f:ajax>
                                  </h:commandLink>
                               </span>
                            </p:column>
                            
                            <p:column styleClass="cart-total">
                            <f:facet name="header">Total</f:facet>
                               $#{cart.product.productPrice*cart.quantity-(cart.product.productPrice*cart.quantity*(cart.product.productDiscount/100))}
                            </p:column>
                            
                        </h:dataTable>
                        <div style="float:right;">  
                        	<span style="font-weight: bold; color: blue;">Total amount: </span><h:outputText value="$#{cartBean.total_amount}" style="font-weight: bold; color: blue; font-size:20px"/>
                        </div><br/><br/>
                            <!-- TABLE START -->
                            <!-- <table class="table table-bordered" id="cart-summary">
                                TABLE HEADER START
                                <thead>
                                    <tr>
                                        <th class="cart-product">Product</th>
                                        <th class="cart-description">Description</th>
                                        <th class="cart-avail text-center">Availability</th>
                                        <th class="cart-unit text-right">Unit price</th>
                                        <th class="cart_quantity text-center">Qty</th>
                                        <th class="cart-delete"><h:outputText value="&#160;" /></th>
                                        <th class="cart-total text-right">Total</th>
                                    </tr>
                                </thead>
                                TABLE HEADER END
                                TABLE BODY START
                                <tbody> 
                                    SINGLE CART_ITEM START
                                    <tr>
                                        <td class="cart-product">
                                            <a href="#"><h:graphicImage library="img" name="product/cart-image1.jpg" alt="Blouse" /></a>
                                        </td>
                                        <td class="cart-description">
                                            <p class="product-name"><a href="#">Faded Short Sleeves T-shirt</a></p>
                                            <small>SKU : demo_1</small>
                                            <small><a href="#">Size : S, Color : Orange</a></small>
                                        </td>
                                        <td class="cart-avail"><span class="label label-success">In stock</span></td>
                                        <td class="cart-unit">
                                            <ul class="price text-right">
                                                <li class="price">$16.51</li>
                                            </ul>
                                        </td>
                                        <td class="cart_quantity text-center">
                                            <div class="cart-plus-minus-button">
                                                <h:inputText styleClass="cart-plus-minus" a:name="qtybutton" value="0" ></h:inputText>
                                            </div>
                                        </td>
                                        <td class="cart-delete text-center">
                                            <span>
                                                <a href="#" class="cart_quantity_delete" title="Delete"><i class="fa fa-trash-o"></i></a>
                                            </span>
                                        </td>
                                        <td class="cart-total">
                                            <span class="price">$16.51</span>
                                        </td>
                                    </tr>
                                    SINGLE CART_ITEM END
                                    SINGLE CART_ITEM START
                                    <tr>
                                        <td class="cart-product">
                                            <a href="#"><h:graphicImage library="img" name="product/cart-image2.jpg" alt="Blouse" /></a>
                                        </td>
                                        <td class="cart-description">
                                            <p class="product-name"><a href="#">Blouse</a></p>
                                            <small>SKU : demo_2</small>
                                            <small><a href="#">Size : S, Color : Black</a></small>
                                        </td>
                                        <td class="cart-avail"><span class="label label-success">In stock</span></td>
                                        <td class="cart-unit">
                                            <ul class="price text-right">
                                                <li class="price special-price">$24.00</li>
                                                <li class="price-percent-reduction small"><h:outputText value="&#160;" />-3%<h:outputText value="&#160;" /></li>
                                                <li class="old-price">$27.00</li>
                                            </ul>
                                        </td>
                                        <td class="cart_quantity text-center">
                                            <div class="cart-plus-minus-button">
                                                <h:inputText styleClass="cart-plus-minus" value="0" a:name="qtybutton" ></h:inputText>
                                            </div>
                                        </td>
                                        <td class="cart-delete text-center">
                                            <a href="#" class="cart_quantity_delete" title="Delete"><i class="fa fa-trash-o"></i></a>
                                        </td>
                                        <td class="cart-total">
                                            <span class="price">$22.95</span>
                                        </td>
                                    </tr>
                                    SINGLE CART_ITEM END
                                    SINGLE CART_ITEM START
                                    <tr>
                                        <td class="cart-product">
                                            <a href="#"><h:graphicImage library="img" name="product/cart-image3.jpg" alt="Blouse" /></a>
                                        </td>
                                        <td class="cart-description">
                                            <p class="product-name"><a href="#">Printed Summer Dress</a></p>
                                            <small>SKU : demo_5</small>
                                            <small><a href="#">Size : M, Color : Blue</a></small>
                                        </td>
                                        <td class="cart-avail"><span class="label label-success">In stock</span></td>
                                        <td class="cart-unit">
                                            <ul class="price text-right">
                                                <li class="price special-price">$30.45</li>
                                                <li class="price-percent-reduction small"><h:outputText value="&#160;" />-7.05%<h:outputText value="&#160;" /></li>
                                                <li class="old-price">$37.50</li>
                                            </ul>
                                        </td>
                                        <td class="cart_quantity text-center">
                                            <div class="cart-plus-minus-button">
                                                <h:inputText styleClass="cart-plus-minus" a:name="qtybutton" value="0" ></h:inputText>
                                            </div>
                                        </td>
                                        <td class="cart-delete text-center">
                                            <a href="#" class="cart_quantity_delete" title="Delete"><i class="fa fa-trash-o"></i></a>
                                        </td>
                                        <td class="cart-total">
                                            <span class="price">$30.45</span>
                                        </td>
                                    </tr>
                                    SINGLE CART_ITEM END
                                </tbody>
                                TABLE BODY END
                                TABLE FOOTER START
                                <tfoot>                                     
                                    <tr class="cart-total-price">
                                        <td class="cart_voucher" colspan="3" rowspan="4"></td>
                                        <td class="text-right" colspan="3">Total products (tax excl.)</td>
                                        <td id="total_product" class="price" colspan="1">$76.46</td>
                                    </tr>
                                    <tr>
                                        <td class="text-right" colspan="3">Total shipping</td>
                                        <td id="total_shipping" class="price" colspan="1">$5.00</td>
                                    </tr>
                                    <tr>
                                        <td class="text-right" colspan="3">Total vouchers (tax excl.)</td>
                                        <td class="price" colspan="1">$0.00</td>
                                    </tr>
                                    <tr>
                                        <td class="total-price-container text-right" colspan="3">
                                            <span>Total</span>
                                        </td>
                                        <td id="total-price-container" class="price" colspan="1">
                                            <span id="total-price">$76.46</span>
                                        </td>
                                    </tr>
                                </tfoot>        
                                TABLE FOOTER END                                   
                            </table> -->
                            <!-- TABLE END -->
                        </div>
                        <!-- CART TABLE_BLOCK END -->
                    </div>
                    <!-- <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="first_item primari-box mycartaddress-info">
                            SINGLE ADDRESS START
                            <ul class="address">
                                <li>
                                    <h3 class="page-subheading box-subheading">
                                        Delivery address (BootExperts Office)
                                    </h3>
                                </li>
                                <li><span class="address_name">BootExperts</span></li>
                                <li><span class="address_company">Web development Company</span></li>
                                <li><span class="address_address1">Bonossri</span></li>
                                <li><span class="address_address2">D-Block</span></li>
                                <li><span class="">Rampura</span></li>
                                <li><span class="">Dhaka</span></li>
                                <li><span class="address_phone">+880 1735161598</span></li>
                                <li><span class="address_phone_mobile">+880 1975161598</span></li>
                            </ul>   
                            SINGLE ADDRESS END
                        </div>                      
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div class="second_item primari-box mycartaddress-info">
                            SINGLE ADDRESS START
                            <ul class="address">
                                <li>
                                    <h3 class="page-subheading box-subheading">
                                        Invoice address (BootExperts Home)
                                    </h3>
                                </li>
                                <li><span class="address_name">BootExperts</span></li>
                                <li><span class="address_company">Web development Company</span></li>
                                <li><span class="address_address1">Dhaka</span></li>
                                <li><span class="address_address2">Bonossri</span></li>
                                <li><span class="">Dhaka-1205</span></li>
                                <li><span class="">Rampura</span></li>
                                <li><span class="address_phone">+880 1735161598</span></li>
                                <li><span class="address_phone_mobile">+880 1975161598</span></li>
                            </ul>   
                            SINGLE ADDRESS END
                        </div>
                    </div> -->
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!-- RETURNE-CONTINUE-SHOP START -->
                        <div class="returne-continue-shop">
                            <a href="index.jsf" class="continueshoping"><i class="fa fa-chevron-left"></i>Continue shopping</a>
                            <!-- <a href="checkout-signin.jsf" class="procedtocheckout">Proceed to checkout<i class="fa fa-chevron-right"></i></a> -->
                            <h:panelGroup rendered="#{cartBean.cart!=null}">
                            	<h:commandLink action="checkout-signin.jsf?faces-redirect=true" value="Proceed to checkout" styleClass="procedtocheckout" rendered="#{loginBean.loggedIn==false}"><i class="fa fa-chevron-right"></i></h:commandLink>
                            	<h:commandLink action="checkout-address.jsf?faces-redirect=true" value="Proceed to checkout" styleClass="procedtocheckout" rendered="#{loginBean.loggedIn==true}"><i class="fa fa-chevron-right"></i></h:commandLink>
                            </h:panelGroup>
                        </div>  
                        <!-- RETURNE-CONTINUE-SHOP END -->                      
                    </div>
                </div>
            </div>
        </section>
        <!-- MAIN-CONTENT-SECTION END -->
        </h:form>
    </ui:define>
    
</ui:composition>